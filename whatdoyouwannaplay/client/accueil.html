<!DOCTYPE html>
<html lang="fr" x-data>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Accueil</title>
        <link rel="stylesheet" href="./assets/css/common.css" />
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
        <script defer scr="./assets/js/alpine-components/quizApp.js"></script>
        <script src="./assets/js/alpine-components/header.js"></script>
    </head>
    <style>
        /* ---- Layout ---- */

        main {
            display: flex;
            justify-content: space-between;
            padding: 2rem;
            gap: 2rem;
        }

        /* ---- Left side ---- */

        #left-side {
            width: 40%;
        }

        #quizz {
            border: 2px solid indigo;
            border-radius: 15px;
            padding: 1rem;
            background-color: #fff8f0;
        }

        #quizz p {
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* ---- Quiz box ---- */

        [x-data="quizApp()"] {
            background-color: #fdf6e3;
            padding: 1rem;
            border-radius: 20px;
            margin-top: 1rem;
        }

        [x-data="quizApp()"] h2 {
            font-size: 1.1rem;
            background-color: #8b5e3c;
            color: white;
            padding: 1rem;
            border-radius: 15px 15px 0 0;
            margin: 0;
        }

        [x-data="quizApp()"] label {
            display: block;
            background-color: #d8b98c;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-top: 0.5rem;
            cursor: pointer;
            font-weight: 500;
        }

        /* Réponses validées */
        input:checked + span::after {
            content: " ✔";
            color: green;
            font-weight: bold;
        }

        input:checked.incorrect + span::after {
            content: " ✘";
            color: red;
            font-weight: bold;
        }

        /* Résultat final */
        [x-data="quizApp()"] .text-center {
            margin-top: 2rem;
        }

        /* ---- Right side ---- */

        #right-side {
            width: 55%;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* ---- Actualité / Jeu en vogue ---- */

        #actuality,
        #vogue {
            margin-top: 1rem;
        }
    </style>
    <body>
        <div class="header" x-data="header">
            <div class="header-logo">
                <a href="./accueil.html"
                    ><img
                        src="./assets/img/logo.png"
                        alt="logo"
                        width="64px"
                        height="64px"
                        style="border-radius: 15px"
                /></a>
            </div>
            <div class="header-links">
                <template x-for="link in links" :key="link.text">
                    <a
                        :href="link.href"
                        x-text="link.text"
                        x-bind:onclick="link.onclick || null"
                    ></a>
                </template>
            </div>
        </div>
        <main>
            <!-- louise ici -->
            <div id="left-side">
                <div id="quizz">
                    <p>Quel jeu te faut-il ?</p>
                    <div
                        x-data="quizApp()"
                        class="bg-white p-6 rounded shadow max-w-xl mx-auto"
                    >
                        <template x-if="!finished">
                            <div>
                                <h2
                                    class="text-lg font-bold mb-4"
                                    x-text="questions[current].text"
                                ></h2>
                                <div class="space-y-2">
                                    <template
                                        x-for="(answer, index) in questions[current].answers"
                                        :key="index"
                                    >
                                        <label class="block">
                                            <input
                                                type="radio"
                                                :name="'q' + current"
                                                :value="index"
                                                x-model="selectedAnswer"
                                                class="mr-2"
                                            />
                                            <span x-text="answer"></span>
                                        </label>
                                    </template>
                                </div>
                                <button
                                    @click="submitAnswer"
                                    :disabled="selectedAnswer === null"
                                    class="mt-4 bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50"
                                >
                                    Suivant
                                </button>
                            </div>
                        </template>

                        <template x-if="finished">
                            <div class="text-center">
                                <h2 class="text-xl font-bold mb-4">
                                    Quiz terminé !
                                </h2>
                                <p>
                                    Tu as obtenu
                                    <span x-text="score"></span> bonne(s)
                                    réponse(s) sur
                                    <span x-text="questions.length"></span>.
                                </p>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
            <div id="right-side">
                <div id="search-bar">
                    <form>
                        <input placeholder="Chercher un jeu..." />
                        <input type="submit" text="loupe" />
                    </form>
                </div>
                <div class="bordered">
                    <div id="actuality" class="bordered">
                        <h3>Actualité du site</h3>
                    </div>
                    <div id="vogue" class="bordered">
                        <h3>Jeu en vogue</h3>
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>
